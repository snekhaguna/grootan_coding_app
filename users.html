<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- As a heading -->
    <nav class="navbar navbar navbar-expand-lg bd-navbar x">
        <div class="container-fluid">
            <h5><span class="navbar-text">AwesomeApp</span></h5>
        </div>
    </nav>

    <div class="container-fluid mt-2">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">NAME</th>
                            <th scope="col">AGE</th>
                            <th scope="col">DATE OF BIRTH</th>
                        </tr>
                    </thead>
                    <tbody id="json-record"></tbody>
                </table>
            </div>
        </div>
    </div>



    <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-body" id="myModalContent" style="color:black"></div>
            </div>
        </div>
    </div>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $.ajax({
            type: 'GET',
            url: "https://snekha123.free.beeceptor.com/users",
            success: function (data) {
                makeUserTable(data);
            }
        });
    });

    function makeUserTable(data) {
        if (data.length > 0) {
            var content = "";
            for (var i = 0; i < data.length; i++) {
                var row = "<tr>"
                row += "<td>" +
                    '<button type="button" data-atr=' + data[i].userId +
                    ' onclick="userView(event);" class="btn btn-link" data-toggle="modal" data-target=".bd-example-modal-lg">' +
                    data[i].userId + '</button>' + "</td>";
                row += "<td>" + data[i].name + "</td>";
                row += "<td>" + data[i].age + "</td>";
                row += "<td>" + data[i].dob + "</td>";
                row += "</tr>";
                content += row;
            }
            $("#json-record").html(content);
            localStorage.setItem("data", JSON.stringify(data));
        }
    }

    function userView(e) {
        var data = JSON.parse(localStorage.getItem("data"));
        var id = e.target.dataset.atr;
        console.log(id);
        console.log(data);
        if (data != null) {
            for (var i = 0; i < data.length; i++) {
                var d = data[i];
                if (d.userId == id) {
                    var content = "<table class='table table-dark table-striped'>";
                    content += "<tbody>";
                    content += "<tr>";
                    content += "<td> User Id : " + d.userId + "</td>";
                    content += "</tr>";
                    content += "<tr>";
                    content += "<td> Name : " + d.name + "</td>";
                    content += "</tr>";
                    content += "<tr>";
                    content += "<td> FirstName : " + d.firstName + "</td>";
                    content += "</tr>";
                    content += "<tr>";
                    content += "<td> LastName : " + d.lastName + "</td>";
                    content += "</tr>";
                    content += "<tr>";
                    content += "<td> Age : " + d.age + "</td>";
                    content += "</tr>";
                    content += "<tr>";
                    content += "<td> Date of birth : " + d.dob + "</td>";
                    content += "</tr>";
                    content += "<tr>";
                    content += "<td> Address Line 1 : " + d.address.addressLine1 + "</td>";
                    content += "</tr>";
                    content += "<tr>";
                    content += "<td> Address Line 2 : " + d.address.addressLine2 + "</td>";
                    content += "</tr>";
                    content += "<tr>";
                    content += "<td> Address Line 3 : " + d.address.addressLine3 + "</td>";
                    content += "</tr>";
                    content += "</tbody>";
                    content += "</table>";
                    $("#myModalContent").html(content);
                }
            }
        }
    }
</script>

</html>
